--- dokuwiki-2008-05-05/inc/common.php~	2008-11-20 16:13:06.616720562 +0200
+++ dokuwiki-2008-05-05/inc/common.php	2008-11-20 16:12:51.042753759 +0200
@@ -1009,7 +1009,20 @@
   $from = str_replace('@NAME@',$INFO['userinfo']['name'],$from);
   $from = str_replace('@MAIL@',$INFO['userinfo']['mail'],$from);
 
-  mail_send($to,$subject,$text,$from,'',$bcc);
+  $headers = array();
+  // add mail headers to identify page changes in same mail thread
+  $file = wikiFN($id);
+  $cur = @filemtime($file);
+  $headers['Message-Id'] = "$id?rev=$cur";
+  if ($rev) {
+      $headers['In-Reply-To'] = "$id?rev=$rev";
+  }
+  $h = '';
+  foreach ($headers as $k => $v) {
+      $h .= sprintf("%s: %s%s", $k, $v, MAILHEADER_EOL);
+  }
+
+  mail_send($to,$subject,$text,$from,'' ,$bcc, $h);
 }
 
 /**
